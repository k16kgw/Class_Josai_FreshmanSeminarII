# 繰り返し

出席パスワード：337840

到達目標

* for文とwhile文を理解し，繰り返し処理を行えるようになる．

準備

1. anacondaを使用し，<span style="color:red">jupyter lab</span>を起動する．
2. `Document（書類）/Fresh`フォルダを開き `+` をクリックして新しいファイルを作成する．
3. ファイル名を `4_{学籍番号}_{氏名}.ipynb` に変更する．例：`4_SI25999_香川渓一郎.ipynb`

---

## 導入（第3回の復習）

* **条件分岐（if文）**：条件がTrueかFalseかによって処理を分ける
* 比較演算子：`==`, `!=`, `>`, `<`, `>=`, `<=`
* 論理演算子：`and`, `or`, `not`
* 例外処理：`try` / `except`
* 入力チェック：`int(input())` で整数化し、ValueErrorを捕捉

```python
# 復習ミニクイズ
s = input("整数を入力: ")
try:
    n = int(s)
    if n % 2 == 0:
        print("偶数")
    else:
        print("奇数")
except ValueError:
    print("整数を入力してください")
```

```{note}
**演習0（3分）**
1. 上のコードを実行して偶数・奇数判定を確認せよ．  
2. 0や負の数を入力したときの動作も観察せよ．
```

---

## 1. 繰り返しとは

同じ処理を**複数回繰り返す**構文を「**繰り返し（ループ）**」という。

### 用途の例

* 同じ計算を複数のデータに対して行う
* 回数を指定して繰り返す
* 入力が正しいまで繰り返す

Pythonには代表的に2種類のループがある：

| 種類       | 使い方           | 回数指定 | 条件指定 |
| :------- | :------------ | :--- | :--- |
| `for`文   | 決まった回数繰り返す    | ✅    | ー    |
| `while`文 | 条件がTrueの間繰り返す | ー    | ✅    |

---

## 2. for文の基本構文

```python
for 変数 in 繰り返し対象:
    処理
```

例：

```python
for i in [1, 2, 3]:
    print(i)
```

出力：

```
1
2
3
```

---

### range関数と組み合わせ

`range(n)` は 0 から n-1 までの整数列を生成する。

```python
for i in range(5):
    print(i)
```

出力：

```
0
1
2
3
4
```

---

### 開始値・終了値・ステップ

```python
for i in range(2, 10, 2):
    print(i)
```

出力：

```
2
4
6
8
```

→ `range(開始, 終了, 増分)`
終了値は **含まれない**ことに注意。

---

```{note}
**演習1（5分）**  
1. `for`文を使って1から10までの整数をすべて出力せよ．  
2. `for`文を使って1から10までの偶数だけを出力せよ．  
3. `for`文で合計を求め，`print(f"合計は {total}")`の形で出力せよ．
```

---

## 3. while文の基本構文

条件がTrueの間，ブロックを繰り返す。

```python
count = 0
while count < 5:
    print(count)
    count += 1
```

出力：

```
0
1
2
3
4
```

---

### 条件がFalseになるまで繰り返す

```python
n = 5
while n > 0:
    print(n)
    n -= 1
print("発射！")
```

出力：

```
5
4
3
2
1
発射！
```

---

```{note}
**演習2（5分）**  
1. 1から100までの整数の合計をwhile文で計算せよ．  
2. while文を使って1から100までの偶数のみの合計を求めよ．
```

---

## 4. break文とcontinue文

### break：ループを途中で抜ける

```python
for i in range(10):
    if i == 5:
        break
    print(i)
```

出力：

```
0
1
2
3
4
```

---

### continue：残りの処理をスキップして次の繰り返しへ

```python
for i in range(6):
    if i % 2 == 0:
        continue
    print(i)
```

出力：

```
1
3
5
```

---

```{note}
**演習3（7分）**
1. `for i in range(1, 10):` を使い，3の倍数をスキップして出力せよ（`continue`使用）。  
2. `for`文の中で`break`を使い，5になったらループを終了せよ．
```

---

## 5. 入力による繰り返し（while + break）

条件が決まっていない場合、入力値でループを制御する。

```python
while True:
    s = input("整数を入力（qで終了）: ")
    if s == "q":
        break
    try:
        n = int(s)
        print("偶数" if n % 2 == 0 else "奇数")
    except ValueError:
        print("整数を入力してください")
```

* `while True:` は無限ループ（強制的に止める条件が必要）
* `break` で脱出する

---

## 6. ネストされたループ

for文やif文を入れ子（ネスト）にして複雑な処理を行うことができる。

```python
for i in range(3):
    for j in range(2):
        print(i, j)
```

出力：

```
0 0
0 1
1 0
1 1
2 0
2 1
```

---

```{note}
**演習4（7分）**  
九九表を出力せよ（1〜9×1〜9）。  
f-stringを用いて `"1×1=1"` の形式で表示せよ。
```

---

## 7. for文とリストの活用

```python
fruits = ["apple", "banana", "cherry"]
for f in fruits:
    print(f)
```

### enumerate関数（番号付き）

```python
for i, f in enumerate(fruits):
    print(i, f)
```

出力：

```
0 apple
1 banana
2 cherry
```

---

```{note}
**演習5（5分）**  
1. 科目リスト `["国語","数学","英語"]` と点数リスト `[80,70,90]` を用いて，  
   `"国語: 80点"` のように1行ずつ出力せよ．  
2. `zip()` を使うと簡潔に書ける。試してみよう。
```

---

## 8. while と for の使い分け

| 条件        | 使う文    |
| :-------- | :----- |
| 回数が決まっている | for文   |
| 条件次第で終了する | while文 |

---

## 9. よくあるエラーと注意点

| エラー                | 原因                | 対策                   |
| :----------------- | :---------------- | :------------------- |
| `IndentationError` | インデントの不一致         | 4スペースで統一             |
| 無限ループ              | 終了条件を満たさない        | 変数を更新する／`break` を入れる |
| `TypeError`        | `range` に数値以外を渡した | `int()` で型変換する       |
| 出力が多すぎる            | ループ範囲が大きすぎる       | `print`の回数を制御する      |

---

## 10. 応用課題

```{note}
**課題1（10分）**  
1から100までの整数について，次の規則に従って出力するプログラムを作れ。  

- 3の倍数のとき `"Fizz"`  
- 5の倍数のとき `"Buzz"`  
- 3と5の両方の倍数のとき `"FizzBuzz"`  
- それ以外は数値そのもの  

例：  
```

1
2
Fizz
4
Buzz
...

```
```

```{note}
**課題2（10分）**  
1から100までの整数の中で，  
- 偶数かつ3の倍数の個数  
- 奇数かつ5の倍数の個数  
をそれぞれ数えて出力せよ．
```

---

## まとめ

* 繰り返し処理には **for** と **while** がある。
* **for** は「範囲・回数」で繰り返し，**while** は「条件」で繰り返す。
* `break` で中断，`continue` でスキップ。
* ネストを使うと多重ループが書ける。
* 終了条件を忘れると無限ループになるので注意。

```{note}
**Exit Ticket（1分）**
1. `for i in range(3):` は何回繰り返されるか？  
2. `while True:` のループを止めるにはどうする？  
```

---

## 宿題（次回まで）

**課題名**：九九表と数列処理プログラム

* 九九の結果を整形して表に出力する（`for` のネストを使う）。
* 1〜100の整数で、偶数・奇数・3の倍数・5の倍数の個数をそれぞれ数えて出力する。
* 提出ファイル名：`4_loop_{学籍番号}_{氏名}.ipynb`

---

この講義の次（第5回）は「関数」を扱い、
本日の for/while を「関数化して再利用」する方法を学びます。
