# UNIX系のOS，エディタの使い方

出席パスワード：**229502**

到達目標
- **ターミナル**（Terminal）で基本的な操作ができるようになる．
- **vim**を用いてファイルの編集・保存ができるようになる．
- **VS Code**を用いてファイルの編集・保存ができるようになる．
<!-- - 次回（第13回）の「ターミナルからPythonを実行する」準備を整える -->

---

## 第11回の復習

- **何を見るか**のモチベーションごとにグラフを使い分ける．
  - 折れ線グラフ（line plot）
  - 散布図（scatter plot）
  - ヒストグラム（histogram）
  - 棒グラフ（bar graph）
- PythonではMatplotlibを使うことでグラフを出力できる．

### 課題の解答例

```{note}
<span style="color:red">**課題1**</span>

第10回課題1で行った「サイコロを5000回振る実験」の結果を，サイコロの目ごとに出た回数を可視化せよ．

- 横軸：出目（1〜6）
- 縦軸：出た回数

どのグラフ（棒グラフ・折れ線など）を採用したか，
その理由をコメントとして書け．
```

```python
import random

# 試行回数
N = 5000
counts = [0,0,0,0,0,0] # 1～6の回数を0で初期化

# 1〜6 の回数を数える
for _ in range(N):
    d = random.randint(1, 6)
    counts[d] += 1
```

ここまでで変数`counts`には1,2,3,4,5,6の出た回数が入っている．
```python
import matplotlib.pyplot as plt

# 対応する目のリスト
faces = [1,2,3,4,5,6]

fig, ax = plt.subplots()
ax.bar(faces, counts)
ax.set_xlabel("Dice")
ax.set_ylabel("Count")
ax.set_title(f"Dice roll counts (N={N})")
ax.set_xticks(faces)
ax.grid(True, axis="y")
plt.show()
```

出目(カテゴリ)ごとの回数の「量」を比較したいので，カテゴリ比較に適した棒グラフを使う．

```{note}
<span style="color:red">**課題2**</span>

$$
\int_0^1 x^3 dx = \frac{1}{4}
$$

について，  
空間分割数$N = 1000, 3000, 10000, 30000$としたときの**区分求積法**での数値積分の値と真の値との誤差を可視化せよ．
   - 横軸：空間分割数$N$
   - 縦軸：誤差

どのグラフ（棒グラフ・折れ線など）を採用したか， その理由をコメントとして書け．
```

```python
# 積分したい関数
def f(x):
    return x**3

# 真の値
exact = 1/4

# 区分求積法（左端）
def integral_riemann(f, a, b, N):
    width = (b - a) / N
    area = 0.0
    for i in range(N):
        x = a + i * width
        area += f(x) * width
    return area

Ns = [1000, 3000, 10000, 30000]

# 誤差を計算
errors = []
for N in Ns:
    approx = integral_riemann(f, 0, 1, N)
    err = abs(approx - exact)
    errors.append(err)
```

```python
import matplotlib.pyplot as plt

fig, ax = plt.subplots()
ax.plot(Ns, errors, marker="o")
ax.set_xlabel("N (number of subintervals)")
ax.set_ylabel("Error |approx - exact|")
ax.set_title("Riemann sum error for $∫_0^1 x^3 dx$")
ax.grid(True)
plt.show()
```

$N$は大小関係のある数値（順序データ）で，$N$を増やしたとき誤差が**どう変化するか**を見たい．そのため変化が読み取りやすい折れ線グラフを使う．

---

## OS（Operating System）

- コンピュータ全体を管理する基本ソフト
- 例：
  - macOS
  - Linux
  - Windows

- macOS / Linux は**UNIX系OS**と呼ばれる．
- 特徴
  - コマンド操作が強力．
  - プログラミング・研究用途に適している．
  - サーバ・AI・数値計算で広く使われている．

---

## 効率的にパソコンを操作するために

![キーボード](/contents/figs/keyboard.jpeg)

### 特別な役割を持つキー

- ⇥：Tabキー
- ⇧：Shiftキー
- ⌘：Commandキー（Windowsでのcontrolキー）
- ^：Controlキー
- ⌥：Optionキー（Windowsでのaltキー）
- ⇪​​：Caps Lockキー…アルファベットの入力を大文字に固定する．（日本語では使う機会は少ないので，システム設定で他のキーに置き換える人も多い）

### ショートカット

| キー入力 | 動作 |
| :-- | :-- |
| ⌘+C | 選択された文字をクリップボードにコピー |
| ⌘+X | 選択された文字をクリップボードにコピーし，選択箇所の文字を削除 |
| ⌘+V | カーソル位置にクリップボードに保存された文字を貼り付け（ペースト） |
| ⌘+Z | 直前に行った操作をキャンセルして元に戻す |
| ⌘+A | 全てを選択する |
| ⌘+S | ファイルを保存する |
| ⌘+N | 新しいファイル・ウィンドウを作成する |
| ⌘+⇧+3 | 画面全体のスクリーンショットを撮る． |
| ⌘+⇧+4 | 画面内指定の範囲のスクリーンショットを撮る． |
| ⌘+⇧+5 | 様々な条件でスクリーンショットを撮る．画面録画も可能． |

※ スクリーンショット：画面を画像ファイルとして保存する機能．

---

## コンピュータの操作

コンピュータの操作方法にはGUIとCUIの2種類が存在する．

- **GUI** (Graphical User Interface)
  - アイコン、ボタン、ウィンドウなどの視覚的な要素を使って、マウスやタッチパネルで直感的にコンピューターを操作するための画面（インターフェース）
- **CUI** (Character User Interface)
  - キーボードから文字（コマンド）を入力してコンピューターを操作するための画面（インターフェース）
  - CUIの例：<span style="color:red">ターミナル</span>（Windowsでは「コマンドライン」）

ターミナルの使用例
```text
$ {コマンド} {引数}
```

※ `-`の後にオプションを追加できる．

```{warning}
ターミナルでのコマンド例を示すとき，行頭に`$`をつける．
これは一般ユーザ（普段パソコンにログインしている個人アカウント）での実行を表す．

コンピュータには一般ユーザの他に管理者権限を持つ特別なユーザ「root」が存在し，rootとしてコマンドを実行することを表す場合にはコマンドの行頭に`#`をつける．
```

### パス（path）の考え方

- コンピュータのファイルは階層構造の中に保存されている．
- どの階層にいるかの場所を指定することでファイルを指定することができる．
- 場所の指定方法には次の2種類がある．
  - **絶対パス**：コンピュータ内の絶対的な位置．例：`/Users/{ユーザ名}/Documents/`
  - **相対パス**：現在いるディレクトリから見た相対的な位置．例：`./`：現在のディレクトリ，`../`：一つ上の階層のディレクトリ．

### 基本的なコマンド

| コマンド名 | 挙動 |
| :--      | :-- |
| `pwd`    | 現在いるディレクトリの絶対パスを出力する．（print working directoryの略） |
| `ls`     | 現在いるディレクトリに含まれている**ファイル・フォルダの一覧を出力**する．<br>（listの略） |
| `ls -l`  | `ls`を詳細も含めて出力する．（long formatの略） |
| `cd` | ユーザのルートディレクトリに**移動**する．（change directoryの略） |
| `cd {フォルダ名}` | `{フォルダ名}`のフォルダに移動する． |
| `cd ..` | 1つ上の階層のディレクトリに移動する． |
| `mkdir {フォルダ名}` | 現在のディレクトリに`{フォルダ名}`の**フォルダを作成**する．<br>（make directoryの略） |
| `touch {ファイル名}` | 現在のディレクトリに`{ファイル名}`の**ファイルを作成**する．<br>既にそのファイルが存在する場合にはタイムスタンプを更新する． |
| `rm {ファイル名}` | 現在のディレクトリにある`{ファイル名}`の**ファイルを削除**する．<br>（ゴミ箱に入れずに直接削除するので注意．removeの略） |
| `rm -r {フォルダ名}` | 現在のディレクトリにある`{フォルダ名}`を**フォルダごと削除**する．<br>（recursiveの略） |
| `curl -O {リンク}` | リンク先のファイルを現在のディレクトリにダウンロードする．<br>（client URLの略） |
| `whoami` | 現在ログインしているユーザ名を出力する． |
| `history` | 実行したコマンドの履歴を出力する． |

```{note}
**演習1**（ターミナル操作）

1. ターミナルを開く．
2. `pwd`で現在いるディレクトリの絶対パスを確認する．
3. `cd`でフレッシュマンセミナー用のフォルダ `/Users/{ユーザ名}/Documents/Fresh` に移動する．
4. `curl`でファイルを[https://seminar.k16kgw.com/Class_Josai_FreshmanSeminarII/_images/keyboard.jpeg](https://seminar.k16kgw.com/Class_Josai_FreshmanSeminarII/_images/keyboard.jpeg)からダウンロードする．
5. `ls`で`keyboard.jpeg`をダウンロードできていることを確認する．
6. `ls`の結果のスクリーンショットを撮ってWebClassの<span style="color:red">「第12回課題」の問1</span>から提出する．ファイル名はそのままで良い．（スクリーンショットはデフォルトではデスクトップ `/Users/{ユーザ名}/Desktop` に保存される．）
```

---

## エディタ

- **テキストファイルを編集するためのソフト**
- Word ではなく「プレーンテキスト」

例：
- **vi**：ターミナルウィンドウから`$ vi {ファイル名}`で起動して使用する．必要最低限の機能のみのため動作が軽い．macは標準搭載．
- **vim**：ターミナルウィンドウから`$ vim {ファイル名}`で起動して使用する．viから機能を拡張したもの．シンタックスハイライトにより，言語に応じて見やすい表示がされる．macは標準搭載．
- **Emacs**：キーバインド（キー操作に様々な操作を割り当てた機能）が豊富で多機能．macはインストールする必要がある．
- **nano**：ターミナルウィンドウから`$ vim {ファイル名}`で起動して使用する．画面下部にコマンドが表示されるため初心者に優しい．macは標準搭載．
- **VS Code**：拡張性及び汎用性が高い．インストールする必要がある．

## vim

`$ vim {ファイル名}`でファイルを開く．無ければ新規作成する．

vim には**複数のモード**がある．

| モード     | 役割       |
| ------- | -------- |
| ノーマルモード | 移動・削除・操作 |
| 挿入モード   | 文字入力     |
| コマンドモード | 保存・終了など |

- vim起動時は**ノーマルモード**．
  - `i`を入力すると**挿入モード**に入る．
  - `:`を入力すると**コマンドモード**に入る．
- 挿入モード・コマンドモードからノーマルモードに戻るには<span style="color:red">Escキー</span>（エスケープキー）を入力する．

### ノーマルモードの操作

| キー  | 動作 |
| ---  | --- |
| h    | 左  |
| j    | 下  |
| k    | 上  |
| l    | 右  |
| x    | カーソル位置の1文字削除 |
| dd   | 1行削除 |

※ 矢印キーでも移動できる．

### 挿入モードの操作

- 文字の入力が可能になる．

### コマンドモードの操作

| コマンド | 動作内容 |
| --- | --- |
| q   | 何も変更していない場合にvimを終了する．（quitの略） |
| q!  | 変更を破棄してvimを終了する． |
| w  | 変更を保存する．（writeの略） |
| wq  | 変更を保存してvimを終了する． |

```{note}
**演習2**（vimでのファイルの作成）

1. ターミナルを開く．
2. フレッシュマンセミナー用のフォルダ `/Users/{ユーザ名}/Documents/Fresh` に移動する．
3. vimで`sample.py`を作成し，`print("好きな言葉")`を書き込んで保存して終了する．
4. 作成した`sample.py`をWebClassの<span style="color:red">「第12回課題」の問2</span>から提出する．
```

---

## VS Code

### インストール

1. Webサイト [https://code.visualstudio.com/download](https://code.visualstudio.com/download) からVS Codeのソフトウェアをダウンロードする．
2. `/Users/{ユーザ名}/Downloads/` にダウンロードされたアプリケーションを`/Users/{ユーザ名}/Application`に移動する．
3. アプリケーションを実行する．（GUIならダブルクリック）

![ダウンロード](/contents/figs/12/vscode.png)

### 起動方法

- `/Users/{ユーザ名}/Application`から起動
- Launch padから起動
- （設定済みの場合）`$ code`で起動

### 拡張機能

日本語表示にする．
1. 拡張機能のタブを開く．
2. 「Japanse Language Pack for Visual Studio Code」を検索して探し，「インストール」をクリックしてインストールする．
3. VS Codeを再起動する．（アプリのVS Codeを右クリック＞終了，再び起動）

![日本語](/contents/figs/12/japanese.png)

---

## エディタの使い分け

| 用途                             | 適したエディタ     |
| -------                         | ---------------- |
| 試行錯誤・学習                    | Jupyter Notebook |
| プログラム作成                    | VS Code          |
| 最低限の編集作業（リモート環境など） | vim              |
| 実行・自動化                     | ターミナル         |

<!-- 
Jupyter = 実験ノート
VS Code = 原稿用紙
ターミナル = 実行装置
 -->

---

```{note}
**演習3**（VS Codeでのファイルの作成）

1. VS Codeを開く．
2. 「開く…」からフレッシュマンセミナー用のフォルダ `/Users/{ユーザ名}/Documents/Fresh` を開く．
3. 「新しいファイル…」から`pc.txt`を作成し，mac bookでできることを思いつく限り箇条書きで書き込んで保存する．
4. 作成した`pc.txt`をWebClassの<span style="color:red">「第12回課題」の問3</span>から提出する．
```

---

## まとめ

- ターミナルは文字で操作する強力な道具
- vimは最低限のファイル編集機能を有したエディタ
- VS Codeはプログラムを書くためのエディタ
- Jupyter，vim，VS Code，ターミナルとで適切な役割がある．
