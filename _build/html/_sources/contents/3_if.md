# 条件分岐（if文）

出席パスワード：875309

到達目標

- if文を理解し，条件に応じて処理を分岐できるようになる．

準備

1. anacondaを使用し，<span style="color:red">jupyter lab</span>を起動する．
2. `Document（書類）/Fresh` フォルダを開き `+` をクリックして新しいノートブックを作成する．
3. ファイル名を `3_{学籍番号}_{氏名}.ipynb` に変更する．例：`3_SI25999_香川渓一郎.ipynb`

## 導入（第2回の復習）

- 変数と型：`int`, `float`, `str`, `bool`
- 算術演算子：`+ - * / // % **`
- 文字列操作：`+`（結合），`*`（繰り返し），f-string（`f"{...}"`）
- 入出力：`int()`, `float()` で型変換

```{note}
**第2回 課題3 - 解答例**

$$
\text{BMI} = \dfrac{\text{(体重[kg])}}{\text{(身長[m])}^2}
$$

```python
target = "ピカチュウ（ポケットモンスター）"
weight = 6.0
height = 0.4
BMI = weight / height ** 2
print(f"{target}のBMIは{BMI}です．")
```

## 制御構文

制御構文：プログラムの実行の流れ（処理の順番）を制御するための文．

- **分岐**：条件によって実行する処理を分けたい（例：「合格」か「不合格」）
- **反復**：同じ処理を繰り返したい（例：データの集計）
- **中断**：エラーが起きたときに別の処理をしたい（例：入力ミス対応）

書き方のルール
- 文の末尾にコロン（`:`）を付ける．
- インデント（字下げ）でブロック（処理の範囲）を表す．
- インデントはTabを入力して使う．

![Tabキー・コロン](/contents/figs/3/mac_keyboard_tab.jpg)

※ Mac book air 商品紹介画像

### フローチャート

フローチャート：アルゴリズムの処理の手順を表す．

基本要素

![基本要素](/contents/figs/3/flow.png)

これらの要素を矢印で結合し，矢印の向きによって処理の流れを示す．

## 条件分岐（if文）

条件を満たすかどうか（真か偽か）によって，指定の処理をするかどうかを決定する．

- `bool`型の値を用いる．
- 比較演算子によって条件を表す．
- 論理演算子によって複数の条件を組み合わせる．

**比較演算子**

| 演算子 | 意味      | 例       |  結果  |
| --    | ----     | -------  | ---   |
| `==`  | 等しい    | `3 == 3` |  True |
| `!=`  | 等しくない | `3 != 4` |  True |
|  `>`  | より大きい | `5 > 3`  |  True |
|  `<`  | より小さい | `2 < 8`  |  True |
| `>=`  | 以上      | `3 >= 3` |  True |
| `<=`  | 以下      | `2 <= 1` | False |

**論理演算子**

| 演算子 | 意味                | 例                  | 結果   |
| ---   | -------------      | ------------------  | ---   |
| `and` | 両方TrueならTrue    | `3 > 0 and 3 < 10`  |  True |
|  `or` | どちらかTrueならTrue | `0 == 0 or 0 == 10` |  True |
| `not` | 真偽を反転           | `not True`          | False |

### 基本形（インデントに注意）

```python
x = 10
if x > 5:
    print("5より大きいよ")
```

- `if 条件:` の行末はコロン `:`
- 「条件」が `True` のときだけ，下のインデントされたブロックを実行する．

### if-else

ifの条件が
- `True` のとき，直下のブロックを実行する．
- `False` のとき，`else:` 以下のブロックを実行する．

```python
x = -3
if x >= 0:
    print("非負")
else:
    print("負")
```

### if-elif-else（多分岐）

ifの条件が
- `True` のとき，直下のブロックを実行する．
- `False` のとき，次の `elif` の条件を判定し
  - `True` のとき，直下のブロックを実行する．
  - `False` のとき，以下同様．

```python
score = 85
if score >= 90:
    print("A")
elif score >= 80:
    print("B")
elif score >= 70:
    print("C")
else:
    print("D")
```

```{note}
**演習1**

次のコードを実行すると，`A`，`B`，`C`，`D`のどれが出力されるかを確認せよ．

```python
score = 85
if score >= 90:
    print("A")
elif score >= 80:
    print("B")
elif score >= 70:
    print("C")
else:
    print("D")
```

```{note}
**演習2**  

好きな年齢 `age` を与え，年齢が
- 75歳以上なら「後期高齢者」
- 65歳以上なら「高齢者」
- 18歳以上なら「成年」
- 18歳未満なら「未成年」
と表示するプログラムを書け．

```python
age = {好きな値を入力}
if age >= 75:
    print("後期高齢者")
{続きを記入}
```

### 比較と論理（条件式の書き方）

boolを利用

- 比較演算子：`== != > < >= <=`
- 論理演算：`and`（かつ） / `or`（または） / `not`（否定）
- 連鎖比較：`0 <= x < 10` は `(0 <= x) and (x < 10)` と同じ意味

```python
age = 19
student = True
if 18 <= age < 20 and student:
    print("大学生年齢帯かつ学生")
```

```{note}
**演習3**  

整数 `n` が与えられたとき，`n` が **偶数かつ 3 の倍数** なら「OK」を表示するプログラムを実装せよ．

```python
n = 346
if {条件を記入}
    print("OK")
```

### 真偽と「真とみなす／偽とみなす」値（Truthiness）

- Pythonでは次のものは偽と評価される：`0`, `0.0`, `""`, `[]`, `{}`, `None`
- それ以外は真と評価される．

```python
name = ""
if name:
    print("名前あり")
else:
    print("未入力です")
```

## 入力の検証（try/except と if の併用）

例外的な手続きが発生した場合の処理．

```python
s = input("整数を入力: ")# inputでキーボードからの入力値を変数に代入する
try:
    n = int(s)
    if n % 2 == 0:
        print("偶数")
    else:
        print("奇数")
except ValueError:
    print("整数を入力してください")
```

### ガード節（早期リターンの発想）

入れ子が深くなるのを避けるため，**先に不適切条件をはじく**書き方（読みやすさ向上）．

```python
score = int(input("0〜100の点数: "))
if not (0 <= score <= 100):
    print("範囲外です")
else:
    # ここに正しい処理
    print("OK")
```

### ネストと可読性（ifの中のif）

ネスト：ある構文（文やブロック）の中に、さらに別の構文を入れ子状に書いた構造．入れ子の数が多いほど「ネストが深い」と表現する．

深いネストは読みづらい → 条件の整理・早期リターン・`elif` の活用で改善する．

悪い例（深いネスト）
```python
if cond1:
    if cond2:
        print("OK")
```

良い例（条件の連結による浅いネスト）
```python
if cond1 and cond2:
    print("OK")
```

## ありがちなエラーと対策

| 症状                 | 原因           | 対策                               |
| ------------------  | ----------     | --------------------              |
| `IndentationError`  | インデント不一致  | ブロック部分を適切にインデントしているか |
| 何も表示されない       | 条件が常にFalse | 条件式を `print()` で確認            |
| 代入と比較を混同       | `=` と `==`    | 比較は `==`                        |
| 無限に入力を求める     | 例外未対応      | `try/except` を追加                |

## 課題

```{note}
**演習4**  

うるう年は次のルールに基づいて決められる．これを元に`year`の年が「うるう年」かそれ以外の「平年」かを出力するプログラムを実装せよ．

- 4で割り切れる年はうるう年
- ただし100で割り切れる年は平年
- ただし400で割り切れる年はうるう年

```python
year = 2025
if {条件を記入}:
    print("うるう年")
else:
    print("平年")
```

```{note}
**おまけ（時間が余った人）**  

整数 `n` が与えられたとき，`n` が **3の倍数または3のつく数字** ならその数字に「!!!」をつけて表示するプログラムを実装せよ．

例：`n=3`なら`3!!!`，`n=4`なら`4`，`n=13`なら`13!!!`

ヒント：文字列`s`に特定の文字`"a"`が含まれているかを判定するには`"a" in s`とすれば良い．
```

## まとめ

- `if / elif / else` で**条件に応じた処理の分岐**ができる．
- 比較・論理演算子で条件式を作る／連鎖比較が読みやすい．
- 入力検証は `try/except`＋`if` の併用が基本．
- 可読性を意識してネストを浅く保つ（ガード節・`elif`）．

### if文のテンプレート

```python
# 典型テンプレ
if 条件A:
    # Aのとき
elif 条件B:
    # Bのとき
else:
    # それ以外
```

```python
# ガード節（早期終了）
if 不適切条件:
    処理中止や警告
else:
    正常処理
```

### 予習

- 「Pythonで始めるプログラミング入門」<span style="color:red">3章</span>を読んでおくこと．

